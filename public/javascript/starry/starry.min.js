"use strict";function _createForOfIteratorHelper(M,i){var t;if("undefined"==typeof Symbol||null==M[Symbol.iterator]){if(Array.isArray(M)||(t=_unsupportedIterableToArray(M))||i&&M&&"number"==typeof M.length){t&&(M=t);var e=0,N=function(){};return{s:N,n:function(){return e>=M.length?{done:!0}:{done:!1,value:M[e++]}},e:function(M){throw M},f:N}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,D=!0,g=!1;return{s:function(){t=M[Symbol.iterator]()},n:function(){var M=t.next();return D=M.done,M},e:function(M){g=!0,n=M},f:function(){try{D||null==t.return||t.return()}finally{if(g)throw n}}}}function _unsupportedIterableToArray(M,i){if(M){if("string"==typeof M)return _arrayLikeToArray(M,i);var t=Object.prototype.toString.call(M).slice(8,-1);return"Object"===t&&M.constructor&&(t=M.constructor.name),"Map"===t||"Set"===t?Array.from(M):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(M,i):void 0}}function _arrayLikeToArray(M,i){(null==i||i>M.length)&&(i=M.length);for(var t=0,e=new Array(i);t<i;t++)e[t]=M[t];return e}function _classCallCheck(M,i){if(!(M instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(M,i){for(var t=0;t<i.length;t++){var e=i[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(M,e.key,e)}}function _createClass(M,i,t){return i&&_defineProperties(M.prototype,i),t&&_defineProperties(M,t),M}var icon={blank:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+Ymxhbms8L3RpdGxlPgogICAgPGcgaWQ9ImJsYW5rIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMTEuMDQ0MDE0MSwxLjM2NzIxMjE3IEw3Ljk5MDI1MzYxLDcuNTUzODk1NzkgTDEuMTYyNzA3NzIsOC41NDY0MDE1IEMwLjkzMDcwNzYxOCw4LjU4MDExMzA5IDAuNzE2MjkwNzA1LDguNjg5MzYzOTYgMC41NTI2NTEyMTcsOC44NTcyNDA4MiBMMC40NjUyNjMyNzYsOC45NTg3OTA1OSBDMC4xNDU0NzkzMTIsOS4zODEwOTI4MyAwLjE4Mjc2NDUyNSw5Ljk4NTMzMTQzIDAuNTcxOTE4NzM3LDEwLjM2NDY2MyBMNS41MTIxMDk1NiwxNS4xODA5MjQ1IEw0LjM0NjI0MTkzLDIxLjk4MDgzNTQgQzQuMzA2NjExNTgsMjIuMjExODk4MSA0LjM0NDI1Njg3LDIyLjQ0OTU4MSA0LjQ1MzM0OTg2LDIyLjY1NzA4ODIgTDQuNTE3NTQ3ODgsMjIuNzYzNzg4MyBDNC44MTg3NTc1NSwyMy4yMDQzOTU5IDUuNDA5MDYzMjksMjMuMzU4OTc1OCA1Ljg5Mjk0NzU3LDIzLjEwNDU4MjggTDExLjk5OTk1MDEsMTkuODkzMzkzNiBMMTguMTA2OTE0LDIzLjEwNDU4MjggQzE4LjMxNDQyMTIsMjMuMjEzNjc1OCAxOC41NTIxMDQyLDIzLjI1MTMyMTEgMTguNzgzMTY2OCwyMy4yMTE2OTA3IEwxOC44OTY1ODk4LDIzLjE4NTg5MDcgQzE5LjQxMzIxNDcsMjMuMDM4NTYyMiAxOS43NDY1MDcyLDIyLjUyMjQxMTYgMTkuNjUzNjE5NiwyMS45ODA4MzU0IEwxOC40ODY3NjYyLDE1LjE4MDkyNDUgTDIzLjQyNzk0MjgsMTAuMzY0NjYzIEMyMy41OTU4MTk3LDEwLjIwMTAyMzUgMjMuNzA1MDcwNiw5Ljk4NjYwNjYzIDIzLjczODc4MjEsOS43NTQ2MDY1MyBMMjMuNzQ5Mjk0NSw5LjYzODc2MjI2IEMyMy43Njg4MjI2LDkuMTAxODk1NzggMjMuMzgwOTI3Myw4LjYyNTQxNjQxIDIyLjgzNzE1MzgsOC41NDY0MDE1IEwxNi4wMDg2MjIyLDcuNTUzODk1NzkgTDEyLjk1NTg0NzQsMS4zNjcyMTIxNyBDMTIuODUyMDkzOCwxLjE1Njk4NDQxIDEyLjY4MTkzMTYsMC45ODY4MjIxODMgMTIuNDcxNzAzOSwwLjg4MzA2ODU4MiBDMTEuOTQzNzY1NywwLjYyMjUxNTUwOCAxMS4zMDQ1NjcyLDAuODM5MjczOTc0IDExLjA0NDAxNDEsMS4zNjcyMTIxNyBaIE0xMS45OTg5MjU3LDIuOTAxODY5MjcgTDE0LjY5NDY4OTcsOC4zNjI2ODcwMiBMMTQuNzYyMjg4NCw4LjQ4MjcyNjIzIEMxNC45NTg2NzQ3LDguNzkwOTAyOTkgMTUuMjgwNjUwOSw5LjAwMTE5MDQgMTUuNjQ2NzMwMSw5LjA1NDM4NDgzIEwyMS42NzE3ODA2LDkuOTI5NTk0ODYgTDE3LjMxMjE4MjcsMTQuMTgwMTIwOSBMMTcuMjE4OTA3OCwxNC4yODE1MDUzIEMxNi45ODY1MDEsMTQuNTYzNTExNiAxNi44ODYwMDE5LDE0LjkzNDcxMTUgMTYuOTQ4NTM1NywxNS4yOTkzMTE1IEwxNy45NzY1OTAyLDIxLjI5OTk2MzEgTDEyLjU4ODMyNDEsMTguNDY3MTkwNiBMMTIuNDQ3MTA3OSwxOC40MDM2NDY1IEMxMi4xMTEwNjc4LDE4LjI3NjU1ODIgMTEuNzMzODUyNiwxOC4yOTc3Mzk2IDExLjQxMTUzNzUsMTguNDY3MTkwNiBMNi4wMjIyODU1NiwyMS4yOTk5NjMxIEw3LjA1MTMyNTkyLDE1LjI5OTMxMTUgTDcuMDY3MTk0NzIsMTUuMTYyNDY0MiBDNy4wODk0NTY2MiwxNC43OTc3MTEgNi45NTI1NzYyNywxNC40MzgzMzIxIDYuNjg3Njc4ODYsMTQuMTgwMTIwOSBMMi4zMjcwOTUxNSw5LjkyOTU5NDg2IEw4LjM1MzEzMTQ4LDkuMDU0Mzg0ODMgQzguNzY0OTcwNTksOC45OTQ1NDExIDkuMTIwOTkxNzksOC43MzU4NzY1NiA5LjMwNTE3MTg0LDguMzYyNjg3MDIgTDExLjk5ODkyNTcsMi45MDE4NjkyNyBaIiBmaWxsPSIjRkFEQjM3IiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgIDwvZz4KPC9zdmc+",active:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+YWN0aXZlPC90aXRsZT4KICAgIDxnIGlkPSJhY3RpdmUiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxwYXRoIGQ9Ik0xMS4wNDQwMTQxLDEuMzY3MjEyMTcgTDcuOTkwMjUzNjEsNy41NTM4OTU3OSBMMS4xNjI3MDc3Miw4LjU0NjQwMTUgQzAuOTMwNzA3NjE4LDguNTgwMTEzMDkgMC43MTYyOTA3MDUsOC42ODkzNjM5NiAwLjU1MjY1MTIxNyw4Ljg1NzI0MDgyIEwwLjQ2NTI2MzI3Niw4Ljk1ODc5MDU5IEMwLjE0NTQ3OTMxMiw5LjM4MTA5MjgzIDAuMTgyNzY0NTI1LDkuOTg1MzMxNDMgMC41NzE5MTg3MzcsMTAuMzY0NjYzIEw1LjUxMjEwOTU2LDE1LjE4MDkyNDUgTDQuMzQ2MjQxOTMsMjEuOTgwODM1NCBDNC4zMDY2MTE1OCwyMi4yMTE4OTgxIDQuMzQ0MjU2ODcsMjIuNDQ5NTgxIDQuNDUzMzQ5ODYsMjIuNjU3MDg4MiBMNC41MTc1NDc4OCwyMi43NjM3ODgzIEM0LjgxODc1NzU1LDIzLjIwNDM5NTkgNS40MDkwNjMyOSwyMy4zNTg5NzU4IDUuODkyOTQ3NTcsMjMuMTA0NTgyOCBMMTEuOTk5OTUwMSwxOS44OTMzOTM2IEwxOC4xMDY5MTQsMjMuMTA0NTgyOCBDMTguMzE0NDIxMiwyMy4yMTM2NzU4IDE4LjU1MjEwNDIsMjMuMjUxMzIxMSAxOC43ODMxNjY4LDIzLjIxMTY5MDcgTDE4Ljg5NjU4OTgsMjMuMTg1ODkwNyBDMTkuNDEzMjE0NywyMy4wMzg1NjIyIDE5Ljc0NjUwNzIsMjIuNTIyNDExNiAxOS42NTM2MTk2LDIxLjk4MDgzNTQgTDE4LjQ4Njc2NjIsMTUuMTgwOTI0NSBMMjMuNDI3OTQyOCwxMC4zNjQ2NjMgQzIzLjU5NTgxOTcsMTAuMjAxMDIzNSAyMy43MDUwNzA2LDkuOTg2NjA2NjMgMjMuNzM4NzgyMSw5Ljc1NDYwNjUzIEwyMy43NDkyOTQ1LDkuNjM4NzYyMjYgQzIzLjc2ODgyMjYsOS4xMDE4OTU3OCAyMy4zODA5MjczLDguNjI1NDE2NDEgMjIuODM3MTUzOCw4LjU0NjQwMTUgTDE2LjAwODYyMjIsNy41NTM4OTU3OSBMMTIuOTU1ODQ3NCwxLjM2NzIxMjE3IEMxMi44NTIwOTM4LDEuMTU2OTg0NDEgMTIuNjgxOTMxNiwwLjk4NjgyMjE4MyAxMi40NzE3MDM5LDAuODgzMDY4NTgyIEMxMS45NDM3NjU3LDAuNjIyNTE1NTA4IDExLjMwNDU2NzIsMC44MzkyNzM5NzQgMTEuMDQ0MDE0MSwxLjM2NzIxMjE3IFoiIGZpbGw9IiNGQURCMzciIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgPC9nPgo8L3N2Zz4=",hover:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+aG92ZXI8L3RpdGxlPgogICAgPGcgaWQ9ImhvdmVyIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMTEuMDQ0MDE0MSwxLjM2NzIxMjE3IEw3Ljk5MDI1MzYxLDcuNTUzODk1NzkgTDEuMTYyNzA3NzIsOC41NDY0MDE1IEMwLjkzMDcwNzYxOCw4LjU4MDExMzA5IDAuNzE2MjkwNzA1LDguNjg5MzYzOTYgMC41NTI2NTEyMTcsOC44NTcyNDA4MiBMMC40NjUyNjMyNzYsOC45NTg3OTA1OSBDMC4xNDU0NzkzMTIsOS4zODEwOTI4MyAwLjE4Mjc2NDUyNSw5Ljk4NTMzMTQzIDAuNTcxOTE4NzM3LDEwLjM2NDY2MyBMNS41MTIxMDk1NiwxNS4xODA5MjQ1IEw0LjM0NjI0MTkzLDIxLjk4MDgzNTQgQzQuMzA2NjExNTgsMjIuMjExODk4MSA0LjM0NDI1Njg3LDIyLjQ0OTU4MSA0LjQ1MzM0OTg2LDIyLjY1NzA4ODIgTDQuNTE3NTQ3ODgsMjIuNzYzNzg4MyBDNC44MTg3NTc1NSwyMy4yMDQzOTU5IDUuNDA5MDYzMjksMjMuMzU4OTc1OCA1Ljg5Mjk0NzU3LDIzLjEwNDU4MjggTDExLjk5OTk1MDEsMTkuODkzMzkzNiBMMTguMTA2OTE0LDIzLjEwNDU4MjggQzE4LjMxNDQyMTIsMjMuMjEzNjc1OCAxOC41NTIxMDQyLDIzLjI1MTMyMTEgMTguNzgzMTY2OCwyMy4yMTE2OTA3IEwxOC44OTY1ODk4LDIzLjE4NTg5MDcgQzE5LjQxMzIxNDcsMjMuMDM4NTYyMiAxOS43NDY1MDcyLDIyLjUyMjQxMTYgMTkuNjUzNjE5NiwyMS45ODA4MzU0IEwxOC40ODY3NjYyLDE1LjE4MDkyNDUgTDIzLjQyNzk0MjgsMTAuMzY0NjYzIEMyMy41OTU4MTk3LDEwLjIwMTAyMzUgMjMuNzA1MDcwNiw5Ljk4NjYwNjYzIDIzLjczODc4MjEsOS43NTQ2MDY1MyBMMjMuNzQ5Mjk0NSw5LjYzODc2MjI2IEMyMy43Njg4MjI2LDkuMTAxODk1NzggMjMuMzgwOTI3Myw4LjYyNTQxNjQxIDIyLjgzNzE1MzgsOC41NDY0MDE1IEwxNi4wMDg2MjIyLDcuNTUzODk1NzkgTDEyLjk1NTg0NzQsMS4zNjcyMTIxNyBDMTIuODUyMDkzOCwxLjE1Njk4NDQxIDEyLjY4MTkzMTYsMC45ODY4MjIxODMgMTIuNDcxNzAzOSwwLjg4MzA2ODU4MiBDMTEuOTQzNzY1NywwLjYyMjUxNTUwOCAxMS4zMDQ1NjcyLDAuODM5MjczOTc0IDExLjA0NDAxNDEsMS4zNjcyMTIxNyBaIiBmaWxsPSIjRkY5NTAwIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgIDwvZz4KPC9zdmc+"},Starry=function(){function M(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,M),i?!!this.setConfig(t)&&(this.domElement=i,void this.build()):(console.error("Starry: Missing DOM element!"),!1)}return _createClass(M,[{key:"setConfig",value:function(M){if(this.config=M,void 0===this.config.stars&&(this.config.stars=5),void 0===this.config.multiRating&&(this.config.multiRating=!0),void 0===this.config.beginWith&&(this.config.beginWith=0),void 0===this.config.readOnly&&(this.config.readOnly=!1),void 0===this.config.staticActiveRating&&(this.config.staticActiveRating=!0),void 0===this.config.setStarsAfterRating&&(this.config.setStarsAfterRating=!0),void 0!==this.config.labels&&Array.isArray(this.config.labels)||(this.config.labels=!1),void 0===this.config.onRate&&(this.config.onRate=function(M){return!0}),void 0===this.currentRating&&(this.currentRating=0),void 0!==this.config.icons&&void 0!==this.config.icons.blank&&void 0!==this.config.icons.hover&&void 0!==this.config.icons.active||(this.config.icons=icon),this.config.beginWith<0&&(this.config.beginWith=0),this.config.beginWith>100&&(this.config.beginWith=100),void 0===this.config.name){if(!1===this.config.multiRating)return console.error("Starry: Give your Starry star rating elements with multi rating a name!"),!1;this.config.name="Starry_"+Date.now()}return!0}},{key:"checkCookie",value:function(){var M,i=document.cookie,t=_createForOfIteratorHelper(i=i.split(";"));try{for(t.s();!(M=t.n()).done;){M.value.trim()==="Starry_"+this.config.name+"=true"&&(this.config.readOnly=!0)}}catch(M){t.e(M)}finally{t.f()}}},{key:"setCookie",value:function(){var M=new Date;M.setTime(M.getTime()+31104e7),document.cookie="Starry_"+this.config.name+"=true; expires="+M.toGMTString()+"; sameSite=Lax",this.config.multiRating=!1,this.config.readOnly=!0}},{key:"build",value:function(){this.clear(),!1===this.config.multiRating&&this.checkCookie();var M=document.createElement("div");M.classList.add("Starry"),M.setAttribute("data-name",this.config.name);var i=document.createElement("div");i.classList.add("Starry-blank");var t,e=_createForOfIteratorHelper(this.getStarRow("blank"));try{for(e.s();!(t=e.n()).done;){var N=t.value;i.appendChild(N)}}catch(M){e.e(M)}finally{e.f()}var n=document.createElement("div");n.classList.add("Starry-active"),!0!==this.config.staticActiveRating&&!0!==this.config.readOnly||n.classList.add("Starry-static"),n.style.width="".concat(this.config.beginWith,"%");var D,g=_createForOfIteratorHelper(this.getStarRow("active"));try{for(g.s();!(D=g.n()).done;){N=D.value;n.appendChild(N)}}catch(M){g.e(M)}finally{g.f()}if(!1===this.config.readOnly){var a=document.createElement("div");a.classList.add("Starry-hover");var c,r=_createForOfIteratorHelper(this.getStarRow("hover"));try{for(r.s();!(c=r.n()).done;){N=c.value;a.appendChild(N)}}catch(M){r.e(M)}finally{r.f()}}M.appendChild(i),M.appendChild(n),!1===this.config.readOnly&&M.appendChild(a),this.domElement.appendChild(M),void 0!==this.config.onRender&&"function"==typeof this.config.onRender&&this.config.onRender()}},{key:"getStarRow",value:function(M){for(var i=this,t=[],e=this.config.stars;e>0;e--){var N=document.createElement("div");N.classList.add("Starry-star"),"hover"===M&&(N.setAttribute("data-value",e),Array.isArray(this.config.labels)&&(N.setAttribute("title",this.config.labels[e-1]),N.setAttribute("data-label",this.config.labels[e-1]),N.setAttribute("data-tooltip",this.config.labels[e-1])),N.addEventListener("click",function(M){var t=M.target;t.classList.contains("Starry-star")||(t=M.target.closest(".Starry-star")),!1!==i.config.onRate(t.getAttribute("data-value"))&&(i.currentRating=parseInt(t.getAttribute("data-value")),!0===i.config.setStarsAfterRating&&(i.config.beginWith=i.currentRating/i.config.stars*100)),!1===i.config.multiRating&&i.setCookie(),i.build()}));var n=document.createElement("img");n.setAttribute("src",this.config.icons[M]),N.appendChild(n),t.push(N)}return t}},{key:"clear",value:function(){void 0!==this.config.onClear&&"function"==typeof this.config.onClear&&this.config.onClear(),this.domElement.innerHTML=""}},{key:"update",value:function(M){this.setConfig(Object.assign({},this.config,M)),this.build()}},{key:"getCurrentRating",value:function(){return this.currentRating}},{key:"getConfig",value:function(){return this.config}},{key:"on",value:function(M,i){switch(M){case"rate":this.config.onRate=i;break;case"render":this.config.onRender=i;break;case"clear":this.config.onClear=i;break;default:return void console.error("Starry: Event '".concat(M,"' doesn't exists!"))}}}]),M}();